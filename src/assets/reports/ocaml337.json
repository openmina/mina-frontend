{"filename":"src/lib/mina_state/snark_transition.ml","lines":[{"line":"open Core_kernel","counters":[]},{"line":"open Mina_base","counters":[]},{"line":"","counters":[]},{"line":"module Poly = struct","counters":[]},{"line":"  [%%versioned","counters":[]},{"line":"  module Stable = struct","counters":[]},{"line":"    module V1 = struct","counters":[]},{"line":"      type ( 'blockchain_state","counters":[{"col_start":6,"col_end":6,"count":1}]},{"line":"           , 'consensus_transition","counters":[]},{"line":"           , 'pending_coinbase_update )","counters":[]},{"line":"           t =","counters":[{"col_start":11,"col_end":11,"count":6}]},{"line":"        { blockchain_state : 'blockchain_state","counters":[{"col_start":10,"col_end":10,"count":0},{"col_start":25,"col_end":25,"count":0},{"col_start":45,"col_end":45,"count":0}]},{"line":"        ; consensus_transition : 'consensus_transition","counters":[{"col_start":10,"col_end":10,"count":0},{"col_start":29,"col_end":29,"count":0},{"col_start":53,"col_end":53,"count":0}]},{"line":"        ; pending_coinbase_update : 'pending_coinbase_update","counters":[{"col_start":10,"col_end":10,"count":0},{"col_start":32,"col_end":32,"count":0},{"col_start":59,"col_end":59,"count":0}]},{"line":"        }","counters":[]},{"line":"      [@@deriving to_yojson, sexp, fields, hlist]","counters":[{"col_start":48,"col_end":48,"count":3}]},{"line":"    end","counters":[]},{"line":"  end]","counters":[]},{"line":"end","counters":[]},{"line":"","counters":[]},{"line":"module Value = struct","counters":[]},{"line":"  [%%versioned","counters":[]},{"line":"  module Stable = struct","counters":[]},{"line":"    module V2 = struct","counters":[]},{"line":"      type t =","counters":[{"col_start":6,"col_end":6,"count":2},{"col_start":11,"col_end":11,"count":1}]},{"line":"        ( Blockchain_state.Value.Stable.V2.t","counters":[{"col_start":8,"col_end":8,"count":0},{"col_start":10,"col_end":10,"count":0}]},{"line":"        , Consensus.Data.Consensus_transition.Value.Stable.V1.t","counters":[{"col_start":10,"col_end":10,"count":0}]},{"line":"        , Pending_coinbase.Update.Stable.V1.t )","counters":[{"col_start":10,"col_end":10,"count":0}]},{"line":"        Poly.Stable.V1.t","counters":[]},{"line":"      [@@deriving sexp, to_yojson]","counters":[{"col_start":33,"col_end":33,"count":5}]},{"line":"","counters":[]},{"line":"      let to_latest = Fn.id","counters":[]},{"line":"    end","counters":[]},{"line":"  end]","counters":[]},{"line":"end","counters":[]},{"line":"","counters":[]},{"line":"[%%define_locally","counters":[]},{"line":"Poly.","counters":[]},{"line":"  ( blockchain_state","counters":[]},{"line":"  , consensus_transition","counters":[]},{"line":"  , pending_coinbase_update","counters":[]},{"line":"  , to_hlist","counters":[]},{"line":"  , of_hlist )]","counters":[]},{"line":"","counters":[]},{"line":"type value = Value.t","counters":[]},{"line":"","counters":[]},{"line":"type var =","counters":[]},{"line":"  ( Blockchain_state.var","counters":[]},{"line":"  , Consensus.Data.Consensus_transition.var","counters":[]},{"line":"  , Pending_coinbase.Update.var )","counters":[]},{"line":"  Poly.t","counters":[]},{"line":"","counters":[]},{"line":"let create_value ~blockchain_state ~consensus_transition","counters":[]},{"line":"    ~pending_coinbase_update () : Value.t =","counters":[]},{"line":"  { blockchain_state; consensus_transition; pending_coinbase_update }","counters":[{"col_start":2,"col_end":2,"count":0}]},{"line":"","counters":[]},{"line":"let genesis ~constraint_constants ~consensus_constants ~genesis_ledger","counters":[]},{"line":"    ~genesis_body_reference : value =","counters":[]},{"line":"  let genesis_ledger = Lazy.force genesis_ledger in","counters":[{"col_start":2,"col_end":2,"count":0}]},{"line":"  { Poly.blockchain_state =","counters":[{"col_start":2,"col_end":2,"count":0}]},{"line":"      Blockchain_state.genesis ~constraint_constants ~consensus_constants","counters":[]},{"line":"        ~genesis_ledger_hash:(Mina_ledger.Ledger.merkle_root genesis_ledger)","counters":[{"col_start":59,"col_end":59,"count":0}]},{"line":"        ~genesis_body_reference","counters":[]},{"line":"  ; consensus_transition = Consensus.Data.Consensus_transition.genesis","counters":[]},{"line":"  ; pending_coinbase_update = Pending_coinbase.Update.genesis","counters":[]},{"line":"  }","counters":[]},{"line":"","counters":[]},{"line":"let typ =","counters":[]},{"line":"  let open Snark_params.Tick.Typ in","counters":[]},{"line":"  of_hlistable ~var_to_hlist:to_hlist ~var_of_hlist:of_hlist","counters":[{"col_start":13,"col_end":13,"count":1}]},{"line":"    ~value_to_hlist:to_hlist ~value_of_hlist:of_hlist","counters":[]},{"line":"    [ Blockchain_state.typ","counters":[]},{"line":"    ; Consensus.Data.Consensus_transition.typ","counters":[]},{"line":"    ; Pending_coinbase.Update.typ","counters":[]},{"line":"    ]","counters":[{"col_start":4,"col_end":4,"count":1}]}]}