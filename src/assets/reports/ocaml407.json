{"filename":"src/lib/mina_wire_types/consensus/consensus_proof_of_stake.ml","lines":[{"line":"open Utils","counters":[]},{"line":"","counters":[]},{"line":"module Types = struct","counters":[]},{"line":"  module type S = sig","counters":[]},{"line":"    module Body_reference : sig","counters":[]},{"line":"      module V1 : sig","counters":[]},{"line":"        type t = Blake2.Stable.V1.t","counters":[]},{"line":"      end","counters":[]},{"line":"    end","counters":[]},{"line":"","counters":[]},{"line":"    module Data : sig","counters":[]},{"line":"      module Consensus_state : sig","counters":[]},{"line":"        module Value : V1S0","counters":[]},{"line":"      end","counters":[]},{"line":"    end","counters":[]},{"line":"  end","counters":[]},{"line":"end","counters":[]},{"line":"","counters":[]},{"line":"module type Concrete = sig","counters":[]},{"line":"  module Body_reference : sig","counters":[]},{"line":"    module V1 : sig","counters":[]},{"line":"      type t = Blake2.Stable.V1.t","counters":[]},{"line":"    end","counters":[]},{"line":"  end","counters":[]},{"line":"","counters":[]},{"line":"  module Data : sig","counters":[]},{"line":"    module Epoch_ledger : sig","counters":[]},{"line":"      include module type of Mina_base.Epoch_ledger","counters":[]},{"line":"    end","counters":[]},{"line":"","counters":[]},{"line":"    module Epoch_data : sig","counters":[]},{"line":"      module Staking_value_versioned : sig","counters":[]},{"line":"        module Value : sig","counters":[]},{"line":"          module V1 : sig","counters":[]},{"line":"            type t =","counters":[]},{"line":"              ( Epoch_ledger.Value.V1.t","counters":[]},{"line":"              , Mina_base.Epoch_seed.V1.t","counters":[]},{"line":"              , Data_hash_lib.State_hash.V1.t","counters":[]},{"line":"              , Data_hash_lib.State_hash.V1.t","counters":[]},{"line":"              , Mina_numbers.Length.V1.t )","counters":[]},{"line":"              Mina_base.Epoch_data.Poly.V1.t","counters":[]},{"line":"          end","counters":[]},{"line":"        end","counters":[]},{"line":"      end","counters":[]},{"line":"","counters":[]},{"line":"      module Next_value_versioned : sig","counters":[]},{"line":"        module Value : sig","counters":[]},{"line":"          module V1 : sig","counters":[]},{"line":"            type t =","counters":[]},{"line":"              ( Epoch_ledger.Value.V1.t","counters":[]},{"line":"              , Mina_base.Epoch_seed.V1.t","counters":[]},{"line":"              , Data_hash_lib.State_hash.V1.t","counters":[]},{"line":"              , Data_hash_lib.State_hash.V1.t","counters":[]},{"line":"              , Mina_numbers.Length.V1.t )","counters":[]},{"line":"              Mina_base.Epoch_data.Poly.V1.t","counters":[]},{"line":"          end","counters":[]},{"line":"        end","counters":[]},{"line":"      end","counters":[]},{"line":"    end","counters":[]},{"line":"","counters":[]},{"line":"    module Consensus_state : sig","counters":[]},{"line":"      module Poly : sig","counters":[]},{"line":"        module V1 : sig","counters":[]},{"line":"          type ( 'length","counters":[]},{"line":"               , 'vrf_output","counters":[]},{"line":"               , 'amount","counters":[]},{"line":"               , 'global_slot","counters":[]},{"line":"               , 'global_slot_since_genesis","counters":[]},{"line":"               , 'staking_epoch_data","counters":[]},{"line":"               , 'next_epoch_data","counters":[]},{"line":"               , 'bool","counters":[]},{"line":"               , 'pk )","counters":[]},{"line":"               t =","counters":[]},{"line":"            { blockchain_length : 'length","counters":[]},{"line":"            ; epoch_count : 'length","counters":[]},{"line":"            ; min_window_density : 'length","counters":[]},{"line":"            ; sub_window_densities : 'length list","counters":[]},{"line":"            ; last_vrf_output : 'vrf_output","counters":[]},{"line":"            ; total_currency : 'amount","counters":[]},{"line":"            ; curr_global_slot : 'global_slot","counters":[]},{"line":"            ; global_slot_since_genesis : 'global_slot_since_genesis","counters":[]},{"line":"            ; staking_epoch_data : 'staking_epoch_data","counters":[]},{"line":"            ; next_epoch_data : 'next_epoch_data","counters":[]},{"line":"            ; has_ancestor_in_same_checkpoint_window : 'bool","counters":[]},{"line":"            ; block_stake_winner : 'pk","counters":[]},{"line":"            ; block_creator : 'pk","counters":[]},{"line":"            ; coinbase_receiver : 'pk","counters":[]},{"line":"            ; supercharge_coinbase : 'bool","counters":[]},{"line":"            }","counters":[]},{"line":"        end","counters":[]},{"line":"      end","counters":[]},{"line":"","counters":[]},{"line":"      module Value : sig","counters":[]},{"line":"        module V1 : sig","counters":[]},{"line":"          type t =","counters":[]},{"line":"            ( Mina_numbers.Length.V1.t","counters":[]},{"line":"            , Consensus_vrf.Output.Truncated.V1.t","counters":[]},{"line":"            , Currency.Amount.V1.t","counters":[]},{"line":"            , Consensus_global_slot.V1.t","counters":[]},{"line":"            , Mina_numbers.Global_slot.V1.t","counters":[]},{"line":"            , Epoch_data.Staking_value_versioned.Value.V1.t","counters":[]},{"line":"            , Epoch_data.Next_value_versioned.Value.V1.t","counters":[]},{"line":"            , bool","counters":[]},{"line":"            , Public_key.Compressed.V1.t )","counters":[]},{"line":"            Poly.V1.t","counters":[]},{"line":"        end","counters":[]},{"line":"      end","counters":[]},{"line":"    end","counters":[]},{"line":"  end","counters":[]},{"line":"end","counters":[]},{"line":"","counters":[]},{"line":"module M = struct","counters":[]},{"line":"  module Body_reference = struct","counters":[]},{"line":"    module V1 = struct","counters":[]},{"line":"      type t = Blake2.Stable.V1.t","counters":[]},{"line":"    end","counters":[]},{"line":"  end","counters":[]},{"line":"","counters":[]},{"line":"  module Data = struct","counters":[]},{"line":"    module Epoch_ledger = struct","counters":[]},{"line":"      include Mina_base.Epoch_ledger","counters":[]},{"line":"    end","counters":[]},{"line":"","counters":[]},{"line":"    module Epoch_data = struct","counters":[]},{"line":"      module Staking_value_versioned = struct","counters":[]},{"line":"        module Value = struct","counters":[]},{"line":"          module V1 = struct","counters":[]},{"line":"            type t =","counters":[]},{"line":"              ( Epoch_ledger.Value.V1.t","counters":[]},{"line":"              , Mina_base.Epoch_seed.V1.t","counters":[]},{"line":"              , Data_hash_lib.State_hash.V1.t","counters":[]},{"line":"              , Data_hash_lib.State_hash.V1.t","counters":[]},{"line":"              , Mina_numbers.Length.V1.t )","counters":[]},{"line":"              Mina_base.Epoch_data.Poly.V1.t","counters":[]},{"line":"          end","counters":[]},{"line":"        end","counters":[]},{"line":"      end","counters":[]},{"line":"","counters":[]},{"line":"      module Next_value_versioned = struct","counters":[]},{"line":"        module Value = struct","counters":[]},{"line":"          module V1 = struct","counters":[]},{"line":"            type t =","counters":[]},{"line":"              ( Epoch_ledger.Value.V1.t","counters":[]},{"line":"              , Mina_base.Epoch_seed.V1.t","counters":[]},{"line":"              , Data_hash_lib.State_hash.V1.t","counters":[]},{"line":"              , Data_hash_lib.State_hash.V1.t","counters":[]},{"line":"              , Mina_numbers.Length.V1.t )","counters":[]},{"line":"              Mina_base.Epoch_data.Poly.V1.t","counters":[]},{"line":"          end","counters":[]},{"line":"        end","counters":[]},{"line":"      end","counters":[]},{"line":"    end","counters":[]},{"line":"","counters":[]},{"line":"    module Consensus_state = struct","counters":[]},{"line":"      module Poly = struct","counters":[]},{"line":"        module V1 = struct","counters":[]},{"line":"          type ( 'length","counters":[]},{"line":"               , 'vrf_output","counters":[]},{"line":"               , 'amount","counters":[]},{"line":"               , 'global_slot","counters":[]},{"line":"               , 'global_slot_since_genesis","counters":[]},{"line":"               , 'staking_epoch_data","counters":[]},{"line":"               , 'next_epoch_data","counters":[]},{"line":"               , 'bool","counters":[]},{"line":"               , 'pk )","counters":[]},{"line":"               t =","counters":[]},{"line":"            { blockchain_length : 'length","counters":[]},{"line":"            ; epoch_count : 'length","counters":[]},{"line":"            ; min_window_density : 'length","counters":[]},{"line":"            ; sub_window_densities : 'length list","counters":[]},{"line":"            ; last_vrf_output : 'vrf_output","counters":[]},{"line":"            ; total_currency : 'amount","counters":[]},{"line":"            ; curr_global_slot : 'global_slot","counters":[]},{"line":"            ; global_slot_since_genesis : 'global_slot_since_genesis","counters":[]},{"line":"            ; staking_epoch_data : 'staking_epoch_data","counters":[]},{"line":"            ; next_epoch_data : 'next_epoch_data","counters":[]},{"line":"            ; has_ancestor_in_same_checkpoint_window : 'bool","counters":[]},{"line":"            ; block_stake_winner : 'pk","counters":[]},{"line":"            ; block_creator : 'pk","counters":[]},{"line":"            ; coinbase_receiver : 'pk","counters":[]},{"line":"            ; supercharge_coinbase : 'bool","counters":[]},{"line":"            }","counters":[]},{"line":"        end","counters":[]},{"line":"      end","counters":[]},{"line":"","counters":[]},{"line":"      module Value = struct","counters":[]},{"line":"        module V1 = struct","counters":[]},{"line":"          type t =","counters":[]},{"line":"            ( Mina_numbers.Length.V1.t","counters":[]},{"line":"            , Consensus_vrf.Output.Truncated.V1.t","counters":[]},{"line":"            , Currency.Amount.V1.t","counters":[]},{"line":"            , Consensus_global_slot.V1.t","counters":[]},{"line":"            , Mina_numbers.Global_slot.V1.t","counters":[]},{"line":"            , Epoch_data.Staking_value_versioned.Value.V1.t","counters":[]},{"line":"            , Epoch_data.Next_value_versioned.Value.V1.t","counters":[]},{"line":"            , bool","counters":[]},{"line":"            , Public_key.Compressed.V1.t )","counters":[]},{"line":"            Poly.V1.t","counters":[]},{"line":"        end","counters":[]},{"line":"      end","counters":[]},{"line":"    end","counters":[]},{"line":"  end","counters":[]},{"line":"end","counters":[]},{"line":"","counters":[]},{"line":"module type Local_sig = Signature(Types).S","counters":[]},{"line":"","counters":[]},{"line":"module Make","counters":[]},{"line":"    (Signature : Local_sig) (F : functor (A : Concrete) -> Signature(A).S) =","counters":[]},{"line":"  F (M)","counters":[]},{"line":"include M","counters":[]}]}