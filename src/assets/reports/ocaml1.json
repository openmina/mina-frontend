{"filename":"src/lib/consensus/global_sub_window.ml","lines":[{"line":"open Unsigned","counters":[]},{"line":"open Snark_params.Tick","counters":[]},{"line":"","counters":[]},{"line":"type t = uint32","counters":[]},{"line":"","counters":[]},{"line":"let succ = UInt32.succ","counters":[]},{"line":"","counters":[]},{"line":"let equal a b = UInt32.compare a b = 0","counters":[{"col_start":16,"col_end":16,"count":2},{"col_start":29,"col_end":29,"count":2}]},{"line":"","counters":[]},{"line":"let of_global_slot ~(constants : Constants.t) (s : Global_slot.t) : t =","counters":[]},{"line":"  UInt32.Infix.(Global_slot.slot_number s / constants.slots_per_sub_window)","counters":[{"col_start":2,"col_end":2,"count":4},{"col_start":38,"col_end":38,"count":4}]},{"line":"","counters":[]},{"line":"let sub_window ~(constants : Constants.t) t =","counters":[]},{"line":"  UInt32.rem t constants.sub_windows_per_window","counters":[{"col_start":2,"col_end":2,"count":4}]},{"line":"","counters":[]},{"line":"let ( >= ) a b = UInt32.compare a b >= 0","counters":[{"col_start":17,"col_end":17,"count":2},{"col_start":30,"col_end":30,"count":2}]},{"line":"","counters":[]},{"line":"let add a b = UInt32.add a b","counters":[{"col_start":14,"col_end":14,"count":2}]},{"line":"","counters":[]},{"line":"let sub a b = UInt32.sub a b","counters":[{"col_start":14,"col_end":14,"count":0}]},{"line":"","counters":[]},{"line":"let constant a = a","counters":[{"col_start":17,"col_end":17,"count":2}]},{"line":"","counters":[]},{"line":"module Checked = struct","counters":[]},{"line":"  module T = Mina_numbers.Global_slot","counters":[]},{"line":"","counters":[]},{"line":"  type t = T.Checked.t","counters":[]},{"line":"","counters":[]},{"line":"  let of_length (x : Mina_numbers.Length.Checked.t) : t =","counters":[]},{"line":"    T.Checked.Unsafe.of_field (Mina_numbers.Length.Checked.to_field x)","counters":[{"col_start":4,"col_end":4,"count":0},{"col_start":66,"col_end":66,"count":0}]},{"line":"","counters":[]},{"line":"  let of_global_slot ~(constants : Constants.var) (s : Global_slot.Checked.t) :","counters":[]},{"line":"      t Checked.t =","counters":[]},{"line":"    let%map q, _ =","counters":[]},{"line":"      T.Checked.div_mod","counters":[{"col_start":22,"col_end":22,"count":0}]},{"line":"        (Global_slot.slot_number s)","counters":[{"col_start":31,"col_end":31,"count":0}]},{"line":"        (of_length constants.slots_per_sub_window)","counters":[{"col_start":17,"col_end":17,"count":0}]},{"line":"    in","counters":[]},{"line":"    q","counters":[{"col_start":4,"col_end":4,"count":0}]},{"line":"","counters":[]},{"line":"  let sub_window ~(constants : Constants.var) (t : t) :","counters":[]},{"line":"      Sub_window.Checked.t Checked.t =","counters":[]},{"line":"    let%map _, shift =","counters":[]},{"line":"      T.Checked.div_mod t (of_length constants.sub_windows_per_window)","counters":[{"col_start":22,"col_end":22,"count":0},{"col_start":35,"col_end":35,"count":0}]},{"line":"    in","counters":[]},{"line":"    Sub_window.Checked.Unsafe.of_field (T.Checked.to_field shift)","counters":[{"col_start":4,"col_end":4,"count":0},{"col_start":57,"col_end":57,"count":0}]},{"line":"","counters":[]},{"line":"  let succ (t : t) : t Checked.t = T.Checked.succ t","counters":[{"col_start":35,"col_end":35,"count":0}]},{"line":"","counters":[]},{"line":"  let equal = T.Checked.equal","counters":[]},{"line":"","counters":[]},{"line":"  let constant a =","counters":[]},{"line":"    T.Checked.Unsafe.of_field @@ Field.Var.constant @@ Field.of_int","counters":[{"col_start":4,"col_end":4,"count":0},{"col_start":50,"col_end":50,"count":0},{"col_start":66,"col_end":66,"count":0}]},{"line":"    @@ UInt32.to_int a","counters":[{"col_start":19,"col_end":19,"count":0}]},{"line":"","counters":[]},{"line":"  let add a (b : Mina_numbers.Length.Checked.t) = T.Checked.add a (of_length b)","counters":[{"col_start":50,"col_end":50,"count":0},{"col_start":75,"col_end":75,"count":0}]},{"line":"","counters":[]},{"line":"  let ( >= ) a b = T.Checked.( >= ) a b","counters":[{"col_start":19,"col_end":19,"count":0}]},{"line":"end","counters":[{"col_start":2,"col_end":2,"count":1}]}]}