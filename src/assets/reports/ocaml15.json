{"filename":"src/lib/transition_frontier/catchup_tree.ml","lines":[{"line":"(* This is temporary until we decide to switch over fully to \"super catchup\".","counters":[]},{"line":"","counters":[]},{"line":"   Normal catchup does not maintain enough state on its own to decide whether a long catchup job is in progress.","counters":[]},{"line":"   Thus, we have the frontier hold onto a \"catchup hash tree\" which contains information about which nodes are","counters":[]},{"line":"   involved in catchup jobs.","counters":[]},{"line":"","counters":[]},{"line":"   Super catchup maintains an explicit tree of blocks that are involved in catchup, which contains enough information","counters":[]},{"line":"   to decide whether a long catchup job is in progress, and so we do not need a separate tree of hashes.","counters":[]},{"line":"*)","counters":[]},{"line":"","counters":[{"col_start":0,"col_end":0,"count":1}]},{"line":"type t = Hash of Catchup_hash_tree.t | Full of Full_catchup_tree.t","counters":[]},{"line":"","counters":[]},{"line":"let max_catchup_chain_length : t -> int = function","counters":[]},{"line":"  | Hash t ->","counters":[{"col_start":4,"col_end":4,"count":0}]},{"line":"      Catchup_hash_tree.max_catchup_chain_length t","counters":[]},{"line":"  | Full t ->","counters":[{"col_start":4,"col_end":4,"count":0}]},{"line":"      Full_catchup_tree.max_catchup_chain_length t","counters":[]},{"line":"","counters":[]},{"line":"let apply_diffs (t : t) (ds : Frontier_base.Diff.Full.E.t list) : unit =","counters":[]},{"line":"  match t with","counters":[{"col_start":2,"col_end":2,"count":0}]},{"line":"  | Hash t ->","counters":[{"col_start":4,"col_end":4,"count":0}]},{"line":"      Catchup_hash_tree.apply_diffs t ds","counters":[]},{"line":"  | Full t ->","counters":[{"col_start":4,"col_end":4,"count":0}]},{"line":"      Full_catchup_tree.apply_diffs t ds","counters":[]},{"line":"","counters":[]},{"line":"let create t ~root =","counters":[]},{"line":"  match t with","counters":[{"col_start":2,"col_end":2,"count":0}]},{"line":"  | `Normal ->","counters":[{"col_start":4,"col_end":4,"count":0}]},{"line":"      Hash (Catchup_hash_tree.create ~root)","counters":[]},{"line":"  | `Super ->","counters":[{"col_start":4,"col_end":4,"count":0}]},{"line":"      Full (Full_catchup_tree.create ~root)","counters":[{"col_start":42,"col_end":42,"count":2}]}]}