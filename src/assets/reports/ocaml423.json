{"filename":"src/lib/transition_handler/unprocessed_transition_cache.ml","lines":[{"line":"(* The unprocessed transition cache is a cache of transitions which have been","counters":[]},{"line":" * ingested from the network but have not yet been processed into the transition","counters":[]},{"line":" * frontier. This is used in order to drop duplicate transitions which are still","counters":[]},{"line":" * being handled by various threads in the transition frontier controller. *)","counters":[]},{"line":"","counters":[{"col_start":0,"col_end":0,"count":1}]},{"line":"open Core_kernel","counters":[]},{"line":"open Mina_base","counters":[]},{"line":"open Network_peer","counters":[]},{"line":"","counters":[]},{"line":"module Name = struct","counters":[]},{"line":"  let t = __MODULE__","counters":[]},{"line":"end","counters":[]},{"line":"","counters":[]},{"line":"module Transmuter = struct","counters":[]},{"line":"  module Source = struct","counters":[]},{"line":"    type t = Mina_block.initial_valid_block Envelope.Incoming.t","counters":[]},{"line":"  end","counters":[]},{"line":"","counters":[]},{"line":"  module Target = struct","counters":[]},{"line":"    include State_hash","counters":[]},{"line":"","counters":[]},{"line":"    let to_string = to_base58_check","counters":[]},{"line":"  end","counters":[]},{"line":"","counters":[]},{"line":"  let transmute enveloped_transition =","counters":[]},{"line":"    let transition, _ = Envelope.Incoming.data enveloped_transition in","counters":[{"col_start":4,"col_end":4,"count":0}]},{"line":"    State_hash.With_state_hashes.state_hash transition","counters":[{"col_start":4,"col_end":4,"count":0}]},{"line":"end","counters":[]},{"line":"","counters":[]},{"line":"module Registry = struct","counters":[]},{"line":"  type element = State_hash.t","counters":[]},{"line":"","counters":[]},{"line":"  let element_added _ =","counters":[]},{"line":"    Mina_metrics.(","counters":[{"col_start":4,"col_end":4,"count":0}]},{"line":"      Gauge.inc_one Transition_frontier_controller.transitions_being_processed)","counters":[]},{"line":"","counters":[]},{"line":"  let element_removed _ _ =","counters":[]},{"line":"    Mina_metrics.(","counters":[{"col_start":4,"col_end":4,"count":0}]},{"line":"      Gauge.dec_one Transition_frontier_controller.transitions_being_processed)","counters":[]},{"line":"end","counters":[]},{"line":"","counters":[]},{"line":"include Cache_lib.Transmuter_cache.Make (Transmuter) (Registry) (Name)","counters":[{"col_start":69,"col_end":69,"count":2}]}]}